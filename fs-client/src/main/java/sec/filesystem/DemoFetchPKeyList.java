package sec.filesystem;

import java.security.PublicKey;
import java.security.cert.Certificate;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import types.Pk_t;

/*  Demo Class used for demonstrating a client connecting to the File Server, 
    and issuing a list command for the Public Key list.

    Please refer to the output generated by the server at runtime as it
    receives and processes the Demo Apps requests, for information on the 
    exceptions caught by the file system, and the returns of the operations 
    being performed by the server.
 */
public class DemoFetchPKeyList {

    public static void main(String[] args) {
        try {
            Library c = new Library();
            
            // Initializing the file system
            System.out.println("Initializing the File System...");
            c.setClientID(c.fs_init());
            System.out.println("Done!");
            System.out.println("Client ID assigned by server: " + c.getClientID().getValue());
            System.out.println("---------------------------------------------------------\n");
            
            // Reading the List of Public Keys
            System.out.println("Reading the Public Key list...");
            List<PublicKey> pKeyList = c.fs_list();
            System.out.println("Done!");
            
            System.out.println("PKey List:");    
            for (PublicKey pkey : pKeyList) {
                System.out.println("   " + pkey);
            }
            System.out.println("---------------------------------------------------------\n");                
            
        } catch (Exception ex) {
            System.out.println("[Catch] Exception: " + ex.getMessage());
            Logger.getLogger(DemoFetchPKeyList.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}
